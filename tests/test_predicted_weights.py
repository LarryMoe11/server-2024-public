from src.predicted_weights import *
import pytest
import pandas as pd

## NOTE: this file is a work in progress and is currently a placeholder.

pred_aim = {
    "alliance_color_is_red": {
        0: False,
        1: True,
        2: False,
        3: True,
        4: False,
        5: True,
        6: False,
        7: True,
        8: False,
        9: True,
    },
    "match_number": {0: 1, 1: 1, 2: 10, 3: 10, 4: 11, 5: 11, 6: 12, 7: 12, 8: 13, 9: 13},
    "_auto_amp": {
        0: 0.75,
        1: 0.0,
        2: 0.0,
        3: 0.0,
        4: 0.0,
        5: 0.0,
        6: 0.0833333333333333,
        7: 0.0,
        8: 0.0,
        9: 0.0833333333333333,
    },
    "_auto_speaker": {
        0: 5.833333333333333,
        1: 4.333333333333334,
        2: 1.75,
        3: 5.666666666666667,
        4: 3.916666666666667,
        5: 0.6666666666666666,
        6: 2.75,
        7: 1.75,
        8: 4.75,
        9: 0.9166666666666666,
    },
    "_num_leave": {
        0: 2.083333333333333,
        1: 2.083333333333333,
        2: 1.3333333333333333,
        3: 1.8333333333333333,
        4: 1.9166666666666667,
        5: 0.4166666666666666,
        6: 2.0,
        7: 1.8333333333333333,
        8: 2.25,
        9: 1.0,
    },
    "_num_onstage": {
        0: 1.875,
        1: 1.7777777777777777,
        2: 0.0,
        3: 2.333333333333333,
        4: 1.8571428571428568,
        5: 2.4027777777777777,
        6: 2.6527777777777777,
        7: 0.5,
        8: 1.2,
        9: 0.375,
    },
    "_num_park": {
        0: 0.9166666666666669,
        1: 1.4166666666666663,
        2: 2.166666666666667,
        3: 1.25,
        4: 1.0833333333333333,
        5: 1.3333333333333333,
        6: 0.4999999999999999,
        7: 1.6666666666666663,
        8: 1.4166666666666667,
        9: 1.4166666666666667,
    },
    "_num_trap": {
        0: 1.4642857142857144,
        1: 1.0,
        2: 0.0,
        3: 0.7272727272727273,
        4: 1.0,
        5: 0.0,
        6: 0.75,
        7: 0.0,
        8: 0.7142857142857143,
        9: 0.0,
    },
    "_tele_amp": {
        0: 8.416666666666668,
        1: 9.0,
        2: 1.3333333333333333,
        3: 6.0,
        4: 3.25,
        5: 1.0,
        6: 0.4166666666666666,
        7: 1.0,
        8: 4.416666666666666,
        9: 2.416666666666667,
    },
    "_tele_amplified": {
        0: 1.0833333333333333,
        1: 2.833333333333333,
        2: 0.25,
        3: 2.083333333333333,
        4: 0.5833333333333334,
        5: 0.0,
        6: 0.4166666666666666,
        7: 0.3333333333333333,
        8: 0.75,
        9: 0.0,
    },
    "_tele_speaker": {
        0: 10.416666666666668,
        1: 5.416666666666666,
        2: 3.4166666666666665,
        3: 8.583333333333334,
        4: 6.75,
        5: 0.75,
        6: 12.0,
        7: 6.833333333333334,
        8: 5.666666666666667,
        9: 1.25,
    },
    "_tele_speaker_all": {
        0: 11.5,
        1: 8.25,
        2: 3.6666666666666665,
        3: 10.666666666666668,
        4: 7.333333333333333,
        5: 0.75,
        6: 12.416666666666666,
        7: 7.166666666666667,
        8: 6.416666666666667,
        9: 1.25,
    },
    "actual_foul_points": {0: 5, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0, 9: 9},
    "actual_rp1": {0: 1, 1: 1, 2: 0, 3: 1, 4: 1, 5: 0, 6: 0, 7: 0, 8: 0, 9: 0},
    "actual_rp2": {0: 0, 1: 1, 2: 0, 3: 1, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0, 9: 0},
    "actual_score": {0: 77, 1: 84, 2: 10, 3: 89, 4: 67, 5: 10, 6: 59, 7: 34, 8: 36, 9: 21},
    "actual_score_auto": {0: 24, 1: 27, 2: 7, 3: 32, 4: 26, 5: 5, 6: 26, 7: 16, 8: 17, 9: 7},
    "actual_score_stage": {0: 2, 1: 12, 2: 1, 3: 12, 4: 10, 5: 3, 6: 10, 7: 5, 8: 5, 9: 2},
    "actual_score_tele": {0: 46, 1: 45, 2: 2, 3: 45, 4: 31, 5: 2, 6: 23, 7: 9, 8: 14, 9: 3},
    "cooperated": {
        0: True,
        1: True,
        2: False,
        3: False,
        4: False,
        5: False,
        6: False,
        7: False,
        8: False,
        9: False,
    },
    "has_actual_data": {
        0: True,
        1: True,
        2: True,
        3: True,
        4: True,
        5: True,
        6: True,
        7: True,
        8: True,
        9: True,
    },
    "predicted_rp1": {0: 1, 1: 1, 2: 0, 3: 1, 4: 1, 5: 0, 6: 1, 7: 0, 8: 1, 9: 0},
    "predicted_rp2": {0: 1, 1: 1, 2: 0, 3: 1, 4: 1, 5: 0, 6: 1, 7: 0, 8: 0, 9: 0},
    "predicted_score_reg": {
        0: 90.99404112880536,
        1: 73.48942355367777,
        2: 24.083596630016665,
        3: 75.17131537040758,
        4: 55.53706045797976,
        5: 13.816970581848608,
        6: 56.27351443137361,
        7: 33.66755397763333,
        8: 58.08620156965952,
        9: 17.824065852429168,
    },
    "predicted_score_reg_auto": {
        0: 33.93303003491667,
        1: 24.459387248141667,
        2: 11.845852748383331,
        3: 28.42111494865,
        4: 22.24214357480833,
        5: 4.1476126111083325,
        6: 18.66635092419167,
        7: 13.845928527633331,
        8: 26.676630921475,
        9: 7.843771679258333,
    },
    "predicted_score_reg_stage": {
        0: 11.985845817472024,
        1: 9.61475858341111,
        2: 1.092878925666667,
        3: 9.259314438824244,
        4: 9.61108529070476,
        5: 5.6516257059652775,
        6: 9.661520285106944,
        7: 1.8767862344166664,
        8: 6.927122401909523,
        9: 1.4916572854791668,
    },
    "predicted_score_reg_tele": {
        0: 45.07516527641667,
        1: 39.415277722125,
        2: 11.144864955966666,
        3: 37.490885982933335,
        4: 23.683831592466667,
        5: 4.017732264775,
        6: 27.945643222075,
        7: 17.944839215583333,
        8: 24.482448246275,
        9: 8.488636887691667,
    },
    "team_numbers[0]": {
        0: 604,
        1: 2551,
        2: 9125,
        3: 8048,
        4: 3880,
        5: 5728,
        6: 5458,
        7: 751,
        8: 7686,
        9: 199,
    },
    "team_numbers[1]": {
        0: 7667,
        1: 3257,
        2: 3482,
        3: 254,
        4: 5419,
        5: 2141,
        6: 1662,
        7: 3598,
        8: 1072,
        9: 8015,
    },
    "team_numbers[2]": {
        0: 5458,
        1: 1678,
        2: 701,
        3: 5515,
        4: 7528,
        5: 4135,
        6: 2135,
        7: 7130,
        8: 604,
        9: 6981,
    },
    "win_chance": {
        0: 0.721,
        1: 0.279,
        2: 0.0,
        3: 1.0,
        4: 0.998,
        5: 0.002,
        6: 0.956,
        7: 0.044,
        8: 0.998,
        9: 0.002,
    },
    "won_match": {
        0: False,
        1: True,
        2: False,
        3: True,
        4: True,
        5: False,
        6: True,
        7: False,
        8: True,
        9: False,
    },
    "event_key": {
        0: "2024cada",
        1: "2024cada",
        2: "2024cada",
        3: "2024cada",
        4: "2024cada",
        5: "2024cada",
        6: "2024cada",
        7: "2024cada",
        8: "2024cada",
        9: "2024cada",
    },
    "actual_score_no_foul": {0: 72, 1: 84, 2: 10, 3: 89, 4: 67, 5: 10, 6: 59, 7: 30, 8: 36, 9: 12},
    "predicted_score_new": {
        0: 88.02475469504404,
        1: 74.25976836175833,
        2: 26.85382200311667,
        3: 75.7307322159288,
        4: 59.88850920794285,
        5: 19.09800127433333,
        6: 60.35900458836666,
        7: 36.2448517163,
        8: 61.08053474919071,
        9: 19.710694701225,
    },
    "predicted_rp1_new": {
        0: 1.346385371116667,
        1: 1.2235191779416668,
        2: 0.3594483594333333,
        3: 1.228567051666667,
        4: 0.790691281575,
        5: 0.1454944561583333,
        6: 0.6833102025583334,
        7: 0.4613460225833333,
        8: 0.9020373280833334,
        9: 0.2652429624083333,
    },
    "predicted_rp2_new": {
        0: 0.6753952179488096,
        1: 0.4583764423,
        2: -0.0893959941333333,
        3: 0.3865475534545454,
        4: 0.4768780942619047,
        5: 0.0887455594666666,
        6: 0.4459334244583333,
        7: -0.0388510901333333,
        8: 0.3065327825038095,
        9: -0.0360149325333333,
    },
}
expected_weights = {
    "score": {
        "const": -1.8357210178,
        "_auto_speaker": 3.3261972774,
        "_auto_amp": 1.3510207911,
        "_num_leave": 5.995113766,
        "_tele_speaker_all": 1.7574535611,
        "_tele_amp": 1.7399168516,
        "_num_onstage": 3.6180720174,
        "_num_trap": 7.9704662237,
        "_num_park": 1.973356717,
    },
    "rp1": {
        "const": -0.287059945,
        "_auto_speaker": 0.0832153976,
        "_auto_amp": -0.1055357247,
        "_tele_speaker_all": 0.0351742679,
        "_tele_amp": 0.0636368235,
    },
    "rp2": {
        "const": 0.0310142725,
        "_num_onstage": 0.0598301184,
        "_num_trap": 0.4104630143,
        "_num_park": -0.0412596896,
    },
    "win_chance": {"const": -4.4636124314, "_rel_score_diff": 3.6841981681},
}


def test_calc_predicted_weights():
    "Test weights calculations."
    # assert calc_predicted_weights(pred_aim) == expected_weights
